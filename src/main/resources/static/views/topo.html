<div align="center" ng-show="showLoading && !showAPIFail">
  <img src="images/loading.gif"> &nbsp;&nbsp; loading topology...
</div>

<div ng-show="showAPIFail">
  <alert type="danger" style="margin-bottom: 10px">
    Failed to 1) retrive data from SOFA-STREAM server or 2) SOFA-STREAM server failed to retrieve data from storm restful server.
    Please 1) check the $http.get value in app.js of SOFA-STREAM project or 2) check the current storm restful server in
    Settings tab.
  </alert>
</div>

<div ng-show="!showLoading">
  <h3>Topology summary</h3>
  <table class="table table-hover table-condensed">
    <thead>
    <tr>
      <th>Name</th>
      <th>Id</th>
      <th>Status</th>
      <th>Uptime</th>
      <th>Num workers</th>
      <th>Num executors</th>
      <th>Num tasks</th>
    </tr>
    </thead>
    <tbody>
    <tr class="active">
      <td>{{topo.name}}</td>
      <td>{{topo.id}}</td>
      <td>{{topo.status}}</td>
      <td>{{topo.uptime}}</td>
      <td>{{topo.workersTotal}}</td>
      <td>{{topo.executorsTotal}}</td>
      <td>{{topo.tasksTotal}}</td>
    </tr>
    </tbody>
  </table>

  <h3>Topology stats</h3>
  <table class="table table-hover table-condensed">
    <thead>
    <tr>
      <th>Window</th>
      <th>Emitted</th>
      <th>Transferred</th>
      <th>Complete latency (ms)</th>
      <th>Acked</th>
      <th>Failed</th>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat="stat in topo.topologyStats" class="active">
      <td>{{stat.windowPretty}}</td>
      <td>{{stat.emitted}}</td>
      <td>{{stat.transferred}}</td>
      <td>{{stat.completeLatency}}</td>
      <td>{{stat.acked}}</td>
      <td>{{stat.failed}}</td>
    </tr>
    </tbody>
  </table>


  <h3>Spouts (10 min)</h3>
  <table class="table table-hover table-condensed">
    <thead>
    <tr>
      <th>
        <a href=""
           ng-click="reverseSort.topo.spouts = !reverseSort.topo.spouts; orderByField.topo.spouts='spoutId';">
          Id
                <span ng-show="orderByField.topo.spouts == 'spoutId'">
                    <span ng-show="!reverseSort.topo.spouts">^</span>
                    <span ng-show="reverseSort.topo.spouts">v</span>
                </span>
        </a>
      </th>
      <th>
        <a href=""
           ng-click="reverseSort.topo.spouts = !reverseSort.topo.spouts; orderByField.topo.spouts='executors';">
          Executors
                <span ng-show="orderByField.topo.spouts == 'executors'">
                    <span ng-show="!reverseSort.topo.spouts">^</span>
                    <span ng-show="reverseSort.topo.spouts">v</span>
                </span>
        </a>
      </th>
      <th>
        <a href=""
           ng-click="reverseSort.topo.spouts = !reverseSort.topo.spouts; orderByField.topo.spouts='tasks';">
          Tasks
                <span ng-show="orderByField.topo.spouts == 'tasks'">
                    <span ng-show="!reverseSort.topo.spouts">^</span>
                    <span ng-show="reverseSort.topo.spouts">v</span>
                </span>
        </a>
      </th>
      <th>
        <a href=""
           ng-click="reverseSort.topo.spouts = !reverseSort.topo.spouts; orderByField.topo.spouts='emitted';">
          Emitted
                <span ng-show="orderByField.topo.spouts == 'emitted'">
                    <span ng-show="!reverseSort.topo.spouts">^</span>
                    <span ng-show="reverseSort.topo.spouts">v</span>
                </span>
        </a>
      </th>
      <th>
        <a href=""
           ng-click="reverseSort.topo.spouts = !reverseSort.topo.spouts; orderByField.topo.spouts='transferred';">
          Transferred
                <span ng-show="orderByField.topo.spouts == 'transferred'">
                    <span ng-show="!reverseSort.topo.spouts">^</span>
                    <span ng-show="reverseSort.topo.spouts">v</span>
                </span>
        </a>
      </th>
      <th>
        <a href=""
           ng-click="reverseSort.topo.spouts = !reverseSort.topo.spouts; orderByField.topo.spouts='completeLatency';">
          Complete latency (ms)
                <span ng-show="orderByField.topo.spouts == 'completeLatency'">
                    <span ng-show="!reverseSort.topo.spouts">^</span>
                    <span ng-show="reverseSort.topo.spouts">v</span>
                </span>
        </a>
      </th>
      <th>
        <a href=""
           ng-click="reverseSort.topo.spouts = !reverseSort.topo.spouts; orderByField.topo.spouts='acked';">
          Acked
                <span ng-show="orderByField.topo.spouts == 'acked'">
                    <span ng-show="!reverseSort.topo.spouts">^</span>
                    <span ng-show="reverseSort.topo.spouts">v</span>
                </span>
        </a>
      </th>
      <th>
        <a href=""
           ng-click="reverseSort.topo.spouts = !reverseSort.topo.spouts; orderByField.topo.spouts='failed';">
          Failed
                <span ng-show="orderByField.topo.spouts == 'failed'">
                    <span ng-show="!reverseSort.topo.spouts">^</span>
                    <span ng-show="reverseSort.topo.spouts">v</span>
                </span>
        </a>
      </th>
      <th>
        <a href=""
           ng-click="reverseSort.topo.spouts = !reverseSort.topo.spouts; orderByField.topo.spouts='lastError';">
          Last error
                <span ng-show="orderByField.topo.spouts == 'lastError'">
                    <span ng-show="!reverseSort.topo.spouts">^</span>
                    <span ng-show="reverseSort.topo.spouts">v</span>
                </span>
        </a>
      </th>
      <th>
        Show details
      </th>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat-start="spout in topo.spouts|orderBy:orderByField.topo.spouts:reverseSort.topo.spouts" class="active">
      <td>{{spout.spoutId}}</td>
      <td>{{spout.executors}}</td>
      <td>{{spout.tasks}}</td>
      <td class="success">{{spout.emitted}}</td>
      <td class="info">{{spout.transferred}}</td>
      <td>{{spout.completeLatency}}</td>
      <td>{{spout.acked}}</td>
      <td>{{spout.failed}}</td>
      <td>{{spout.lastError}}</td>
      <td>
        <button class="btn btn-default" ng-click="isSpoutsShow[$index] = !isSpoutsShow[$index]">
          Details
        </button>
      </td>
    </tr>
    <tr ng-repeat-end collapse="!isSpoutsShow[$index]">
      <td colspan="10" class="table-bordered sub-table">
        <div>
          <div class="sub-table-title"
               ng-show="spout.compDetails.outputStats.length > 0">- {{spout.spoutId}} Output stats (10m)
          </div>
          <table class="table table-hover table-condensed" style="margin-bottom: 0"
                 ng-show="spout.compDetails.outputStats.length > 0">
            <thead>
            <tr>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.spouts.stat[$index] = !reverseSort.topo.spouts.stat[$index]; orderByField.topo.spouts.stat[$index]='stream';">
                  Stream
                            <span ng-show="orderByField.topo.spouts.stat[$index] == 'stream'">
                                <span ng-show="!reverseSort.topo.spouts.stat[$index]">^</span>
                                <span ng-show="reverseSort.topo.spouts.stat[$index]">v</span>
                            </span>
                </a>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.spouts.stat[$index] = !reverseSort.topo.spouts.stat[$index]; orderByField.topo.spouts.stat[$index]='emitted';">
                  Emitted
                            <span ng-show="orderByField.topo.spouts.stat[$index] == 'emitted'">
                                <span ng-show="!reverseSort.topo.spouts.stat[$index]">^</span>
                                <span ng-show="reverseSort.topo.spouts.stat[$index]">v</span>
                            </span>
                </a>
              </th>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.spouts.stat[$index] = !reverseSort.topo.spouts.stat[$index]; orderByField.topo.spouts.stat[$index]='transferred';">
                  Transferred
                            <span ng-show="orderByField.topo.spouts.stat[$index] == 'transferred'">
                                <span ng-show="!reverseSort.topo.spouts.stat[$index]">^</span>
                                <span ng-show="reverseSort.topo.spouts.stat[$index]">v</span>
                            </span>
                </a>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.spouts.stat[$index] = !reverseSort.topo.spouts.stat[$index]; orderByField.topo.spouts.stat[$index]='completeLatency';">
                  Complete latency (ms)
                            <span ng-show="orderByField.topo.spouts.stat[$index] == 'completeLatency'">
                                <span ng-show="!reverseSort.topo.spouts.stat[$index]">^</span>
                                <span ng-show="reverseSort.topo.spouts.stat[$index]">v</span>
                            </span>
                </a>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.spouts.stat[$index] = !reverseSort.topo.spouts.stat[$index]; orderByField.topo.spouts.stat[$index]='acked';">
                  Acked
                            <span ng-show="orderByField.topo.spouts.stat[$index] == 'acked'">
                                <span ng-show="!reverseSort.topo.spouts.stat[$index]">^</span>
                                <span ng-show="reverseSort.topo.spouts.stat[$index]">v</span>
                            </span>
                </a>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.spouts.stat[$index] = !reverseSort.topo.spouts.stat[$index]; orderByField.topo.spouts.stat[$index]='failed';">
                  Failed
                            <span ng-show="orderByField.topo.spouts.stat[$index] == 'failed'">
                                <span ng-show="!reverseSort.topo.spouts.stat[$index]">^</span>
                                <span ng-show="reverseSort.topo.spouts.stat[$index]">v</span>
                            </span>
                </a>
              </th>
            </tr>
            </thead>
            <tbody>

            <tr
              ng-repeat="stat in spout.compDetails.outputStats|orderBy:orderByField.topo.spouts.stat[$index]:reverseSort.topo.spouts.stat[$index]"
              class="active">
              <td>{{stat.stream}}</td>
              <td>{{stat.emitted}}</td>
              <td>{{stat.transferred}}</td>
              <td>{{stat.completeLatency}}</td>
              <td>{{stat.acked}}</td>
              <td>{{stat.failed}}</td>
            </tr>
            </tbody>
          </table>

          <div class="sub-table-title"
               ng-show="spout.compDetails.executorStats.length > 0">- {{spout.spoutId}} Executors (10m)
          </div>

          <table class="table table-hover table-condensed" style="margin-bottom: 0"
                 ng-show="spout.compDetails.executorStats.length > 0">
            <thead>
            <tr>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.spouts.exestat[$index] = !reverseSort.topo.spouts.exestat[$index]; orderByField.topo.spouts.exestat[$index]='id';">
                  Tasks
                            <span ng-show="orderByField.topo.spouts.exestat[$index] == 'id'">
                                <span ng-show="!reverseSort.topo.spouts.exestat[$index]">^</span>
                                <span ng-show="reverseSort.topo.spouts.exestat[$index]">v</span>
                            </span>
                </a>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.spouts.exestat[$index] = !reverseSort.topo.spouts.exestat[$index]; orderByField.topo.spouts.exestat[$index]='host';">
                  Host
                            <span ng-show="orderByField.topo.spouts.exestat[$index] == 'host'">
                                <span ng-show="!reverseSort.topo.spouts.exestat[$index]">^</span>
                                <span ng-show="reverseSort.topo.spouts.exestat[$index]">v</span>
                            </span>
                </a>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.spouts.exestat[$index] = !reverseSort.topo.spouts.exestat[$index]; orderByField.topo.spouts.exestat[$index]='ip';">
                  IP
                            <span ng-show="orderByField.topo.spouts.exestat[$index] == 'ip'">
                                <span ng-show="!reverseSort.topo.spouts.exestat[$index]">^</span>
                                <span ng-show="reverseSort.topo.spouts.exestat[$index]">v</span>
                            </span>
                </a>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.spouts.exestat[$index] = !reverseSort.topo.spouts.exestat[$index]; orderByField.topo.spouts.exestat[$index]='port';">
                  Port
                            <span ng-show="orderByField.topo.spouts.exestat[$index] == 'port'">
                                <span ng-show="!reverseSort.topo.spouts.exestat[$index]">^</span>
                                <span ng-show="reverseSort.topo.spouts.exestat[$index]">v</span>
                            </span>
                </a>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.spouts.exestat[$index] = !reverseSort.topo.spouts.exestat[$index]; orderByField.topo.spouts.exestat[$index]='uptime';">
                  Uptime
                            <span ng-show="orderByField.topo.spouts.exestat[$index] == 'uptime'">
                                <span ng-show="!reverseSort.topo.spouts.exestat[$index]">^</span>
                                <span ng-show="reverseSort.topo.spouts.exestat[$index]">v</span>
                            </span>
                </a>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.spouts.exestat[$index] = !reverseSort.topo.spouts.exestat[$index]; orderByField.topo.spouts.exestat[$index]='emitted';">
                  Emitted
                            <span ng-show="orderByField.topo.spouts.exestat[$index] == 'emitted'">
                                <span ng-show="!reverseSort.topo.spouts.exestat[$index]">^</span>
                                <span ng-show="reverseSort.topo.spouts.exestat[$index]">v</span>
                            </span>
                </a>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.spouts.exestat[$index] = !reverseSort.topo.spouts.exestat[$index]; orderByField.topo.spouts.exestat[$index]='transferred';">
                  Transferred
                            <span ng-show="orderByField.topo.spouts.exestat[$index] == 'transferred'">
                                <span ng-show="!reverseSort.topo.spouts.exestat[$index]">^</span>
                                <span ng-show="reverseSort.topo.spouts.exestat[$index]">v</span>
                            </span>
                </a>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.spouts.exestat[$index] = !reverseSort.topo.spouts.exestat[$index]; orderByField.topo.spouts.exestat[$index]='acked';">
                  Acked
                            <span ng-show="orderByField.topo.spouts.exestat[$index] == 'acked'">
                                <span ng-show="!reverseSort.topo.spouts.exestat[$index]">^</span>
                                <span ng-show="reverseSort.topo.spouts.exestat[$index]">v</span>
                            </span>
                </a>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.spouts.exestat[$index] = !reverseSort.topo.spouts.exestat[$index]; orderByField.topo.spouts.exestat[$index]='failed';">
                  Failed
                            <span ng-show="orderByField.topo.spouts.exestat[$index] == 'failed'">
                                <span ng-show="!reverseSort.topo.spouts.exestat[$index]">^</span>
                                <span ng-show="reverseSort.topo.spouts.exestat[$index]">v</span>
                            </span>
                </a>

              </th>
            </tr>
            </thead>
            <tbody>
            <tr
              ng-repeat="exestat in spout.compDetails.executorStats|orderBy:orderByField.topo.spouts.exestat[$index]:reverseSort.topo.spouts.exestat[$index]"
              class="active">
              <td>{{exestat.id}}</td>
              <td>{{exestat.host}}</td>
              <td>{{exestat.ip}}</td>
              <td>{{exestat.port}}</td>
              <td>{{exestat.uptime}}</td>
              <td>{{exestat.emitted}}</td>
              <td>{{exestat.transferred}}</td>
              <td>{{exestat.acked}}</td>
              <td>{{exestat.failed}}</td>
            </tr>
            </tbody>
          </table>

          <div class="sub-table-title" ng-show="spout.compDetails.componentErrors.length > 0">
            {{spout.spoutId}} Errors (10m)
          </div>
          <table ng-show="spout.compDetails.componentErrors.length > 0"
                 class="table table-hover table-condensed">
            <thead>
            <tr>
              <th>Time</th>
              <th>Error</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="(key, value) in spout.compDetails.componentErrors" class="active">
              <td>{{value.time}}</td>
              <td>{{value.error}}</td>
            </tr>
            </tbody>
          </table>
        </div>
      </td>
    </tr>
    </tbody>
  </table>


  <h3>Bolts (10 min)</h3>
  <table class="table table-hover table-condensed">
    <thead>
    <tr>
      <th>
        <a href=""
           ng-click="reverseSort.topo.bolts = !reverseSort.topo.bolts; orderByField.topo.bolts='boltId';">
          Id
                <span ng-show="orderByField.topo.bolts == 'boltId'">
                    <span ng-show="!reverseSort.topo.bolts">^</span>
                    <span ng-show="reverseSort.topo.bolts">v</span>
                </span>
        </a>
      </th>
      <th>
        <a href=""
           ng-click="reverseSort.topo.bolts = !reverseSort.topo.bolts; orderByField.topo.bolts='executors';">
          Executers
                <span ng-show="orderByField.topo.bolts == 'executors'">
                    <span ng-show="!reverseSort.topo.bolts">^</span>
                    <span ng-show="reverseSort.topo.bolts">v</span>
                </span>
        </a>
      </th>
      <th>
        <a href=""
           ng-click="reverseSort.topo.bolts = !reverseSort.topo.bolts; orderByField.topo.bolts='tasks';">
          Tasks
                <span ng-show="orderByField.topo.bolts == 'tasks'">
                    <span ng-show="!reverseSort.topo.bolts">^</span>
                    <span ng-show="reverseSort.topo.bolts">v</span>
                </span>
        </a>
      </th>
      <th>
        <a href=""
           ng-click="reverseSort.topo.bolts = !reverseSort.topo.bolts; orderByField.topo.bolts='emitted';">
          Emitted
                <span ng-show="orderByField.topo.bolts == 'emitted'">
                    <span ng-show="!reverseSort.topo.bolts">^</span>
                    <span ng-show="reverseSort.topo.bolts">v</span>
                </span>
        </a>
      </th>
      <th>
        <a href=""
           ng-click="reverseSort.topo.bolts = !reverseSort.topo.bolts; orderByField.topo.bolts='transferred';">
          Transferred
                <span ng-show="orderByField.topo.bolts == 'transferred'">
                    <span ng-show="!reverseSort.topo.bolts">^</span>
                    <span ng-show="reverseSort.topo.bolts">v</span>
                </span>
        </a>
      </th>
      <th>
        <a href=""
           ng-click="reverseSort.topo.bolts = !reverseSort.topo.bolts; orderByField.topo.bolts='capacity';">
          Capacity (last 10m)
                <span ng-show="orderByField.topo.bolts == 'capacity'">
                    <span ng-show="!reverseSort.topo.bolts">^</span>
                    <span ng-show="reverseSort.topo.bolts">v</span>
                </span>
        </a>
      </th>
      <th>
        <a href=""
           ng-click="reverseSort.topo.bolts = !reverseSort.topo.bolts; orderByField.topo.bolts='executeLatency';">
          Execute latency (ms)
                <span ng-show="orderByField.topo.bolts == 'executeLatency'">
                    <span ng-show="!reverseSort.topo.bolts">^</span>
                    <span ng-show="reverseSort.topo.bolts">v</span>
                </span>
        </a>
      </th>
      <th>
        <a href=""
           ng-click="reverseSort.topo.bolts = !reverseSort.topo.bolts; orderByField.topo.bolts='executed';">
          Executed
                <span ng-show="orderByField.topo.bolts == 'executed'">
                    <span ng-show="!reverseSort.topo.bolts">^</span>
                    <span ng-show="reverseSort.topo.bolts">v</span>
                </span>
        </a>
      </th>
      <th>
        <a href=""
           ng-click="reverseSort.topo.bolts = !reverseSort.topo.bolts; orderByField.topo.bolts='processLatency';">
          Process latency (ms)
                <span ng-show="orderByField.topo.bolts == 'processLatency'">
                    <span ng-show="!reverseSort.topo.bolts">^</span>
                    <span ng-show="reverseSort.topo.bolts">v</span>
                </span>
        </a>
      </th>
      <th>
        <a href=""
           ng-click="reverseSort.topo.bolts = !reverseSort.topo.bolts; orderByField.topo.bolts='acked';">
          Acked
                <span ng-show="orderByField.topo.bolts == 'acked'">
                    <span ng-show="!reverseSort.topo.bolts">^</span>
                    <span ng-show="reverseSort.topo.bolts">v</span>
                </span>
        </a>
      </th>
      <th>
        <a href=""
           ng-click="reverseSort.topo.bolts = !reverseSort.topo.bolts; orderByField.topo.bolts='failed';">
          Failed
                <span ng-show="orderByField.topo.bolts == 'failed'">
                    <span ng-show="!reverseSort.topo.bolts">^</span>
                    <span ng-show="reverseSort.topo.bolts">v</span>
                </span>
        </a>
      </th>
      <th>
        <a href=""
           ng-click="reverseSort.topo.bolts = !reverseSort.topo.bolts; orderByField.topo.bolts='lastError';">
          Last error
                <span ng-show="orderByField.topo.bolts == 'lastError'">
                    <span ng-show="!reverseSort.topo.bolts">^</span>
                    <span ng-show="reverseSort.topo.bolts">v</span>
                </span>
        </a>
      </th>
      <th>Show details</th>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat-start="bolt in topo.bolts|orderBy:orderByField.topo.bolts:reverseSort.topo.bolts" class="active">
      <td>{{bolt.boltId}}</td>
      <td>{{bolt.executors}}</td>
      <td>{{bolt.tasks}}</td>
      <td class="success">{{bolt.emitted}}</td>
      <td class="info">{{bolt.transferred}}</td>
      <td>{{bolt.capacity}}</td>
      <td>{{bolt.executeLatency}}</td>
      <td>{{bolt.executed}}</td>
      <td>{{bolt.processLatency}}</td>
      <td class="success">{{bolt.acked}}</td>
      <td>{{bolt.failed}}</td>
      <td>{{bolt.lastError}}</td>
      <td>
        <button class="btn btn-default" ng-click="isBoltsShow[$index] = !isBoltsShow[$index]">
          Details
        </button>
      </td>
    </tr>
    <tr ng-repeat-end collapse="!isBoltsShow[$index]" class="table-bordered sub-table">
      <td colspan="13">
        <div>
          <div class="sub-table-title"
               ng-show="bolt.compDetails.inputStats.length > 0">- {{bolt.boltId}} Input stats (10m)
          </div>
          <table class="table table-hover table-condensed" style="margin-bottom: 0"
                 ng-show="bolt.compDetails.inputStats.length > 0">
            <thead>
            <tr>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.bolts.instat[$index] = !reverseSort.topo.bolts.instat[$index];
                           orderByField.topo.bolts.instat[$index]='component';">
                  Component
                            <span ng-show="orderByField.topo.bolts.instat[$index] == 'component'">
                                <span ng-show="!reverseSort.topo.bolts.instat[$index]">^</span>
                                <span ng-show="reverseSort.topo.bolts.instat[$index]">v</span>
                            </span>
                </a>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.bolts.instat[$index] = !reverseSort.topo.bolts.instat[$index];
                           orderByField.topo.bolts.instat[$index]='stream';">
                  Stream
                            <span ng-show="orderByField.topo.bolts.instat[$index] == 'stream'">
                                <span ng-show="!reverseSort.topo.bolts.instat[$index]">^</span>
                                <span ng-show="reverseSort.topo.bolts.instat[$index]">v</span>
                            </span>
                </a>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.bolts.instat[$index] = !reverseSort.topo.bolts.instat[$index];
                           orderByField.topo.bolts.instat[$index]='executeLatency';">
                  Execute Latency (ms)
                            <span ng-show="orderByField.topo.bolts.instat[$index] == 'executeLatency'">
                                <span ng-show="!reverseSort.topo.bolts.instat[$index]">^</span>
                                <span ng-show="reverseSort.topo.bolts.instat[$index]">v</span>
                            </span>
                </a>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.bolts.instat[$index] = !reverseSort.topo.bolts.instat[$index];
                           orderByField.topo.bolts.instat[$index]='executed';">
                  Executed
                            <span ng-show="orderByField.topo.bolts.instat[$index] == 'executed'">
                                <span ng-show="!reverseSort.topo.bolts.instat[$index]">^</span>
                                <span ng-show="reverseSort.topo.bolts.instat[$index]">v</span>
                            </span>
                </a>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.bolts.instat[$index] = !reverseSort.topo.bolts.instat[$index];
                           orderByField.topo.bolts.instat[$index]='processLatency';">
                  Process latency (ms)
                            <span ng-show="orderByField.topo.bolts.instat[$index] == 'processLatency'">
                                <span ng-show="!reverseSort.topo.bolts.instat[$index]">^</span>
                                <span ng-show="reverseSort.topo.bolts.instat[$index]">v</span>
                            </span>
                </a>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.bolts.instat[$index] = !reverseSort.topo.bolts.instat[$index];
                           orderByField.topo.bolts.instat[$index]='acked';">
                  Acked
                            <span ng-show="orderByField.topo.bolts.instat[$index] == 'acked'">
                                <span ng-show="!reverseSort.topo.bolts.instat[$index]">^</span>
                                <span ng-show="reverseSort.topo.bolts.instat[$index]">v</span>
                            </span>
                </a>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.bolts.instat[$index] = !reverseSort.topo.bolts.instat[$index];
                           orderByField.topo.bolts.instat[$index]='failed';">
                  Failed
                            <span ng-show="orderByField.topo.bolts.instat[$index] == 'failed'">
                                <span ng-show="!reverseSort.topo.bolts.instat[$index]">^</span>
                                <span ng-show="reverseSort.topo.bolts.instat[$index]">v</span>
                            </span>
                </a>
              </th>
            </tr>
            </thead>
            <tbody>
            <tr
              ng-repeat="stat in bolt.compDetails.inputStats|orderBy:orderByField.topo.bolts.instat[$index]:reverseSort.topo.bolts.instat[$index]"
              class="active">
              <td>{{stat.component}}</td>
              <td>{{stat.stream}}</td>
              <td>{{stat.executeLatency}}</td>
              <td>{{stat.executed}}</td>
              <td>{{stat.processLatency}}</td>
              <td>{{stat.acked}}</td>
              <td>{{stat.failed}}</td>
            </tr>
            </tbody>
          </table>

          <div class="sub-table-title"
               ng-show="bolt.compDetails.outputStats.length > 0">- {{bolt.boltId}} Output stats (10m)
          </div>
          <table class="table table-hover table-condensed" style="margin-bottom: 0"
                 ng-show="bolt.compDetails.outputStats.length > 0">
            <thead>
            <tr>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.bolts.outstat[$index] = !reverseSort.topo.bolts.outstat[$index];
                           orderByField.topo.bolts.outstat[$index]='stream';">
                  Stream
                            <span ng-show="orderByField.topo.bolts.outstat[$index] == 'stream'">
                                <span ng-show="!reverseSort.topo.bolts.outstat[$index]">^</span>
                                <span ng-show="reverseSort.topo.bolts.outstat[$index]">v</span>
                            </span>
                </a>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.bolts.outstat[$index] = !reverseSort.topo.bolts.outstat[$index];
                           orderByField.topo.bolts.outstat[$index]='emitted';">
                  Emitted
                            <span ng-show="orderByField.topo.bolts.outstat[$index] == 'emitted'">
                                <span ng-show="!reverseSort.topo.bolts.outstat[$index]">^</span>
                                <span ng-show="reverseSort.topo.bolts.outstat[$index]">v</span>
                            </span>
                </a>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.bolts.outstat[$index] = !reverseSort.topo.bolts.outstat[$index];
                           orderByField.topo.bolts.outstat[$index]='transferred';">
                  Transferred
                            <span ng-show="orderByField.topo.bolts.outstat[$index] == 'transferred'">
                                <span ng-show="!reverseSort.topo.bolts.outstat[$index]">^</span>
                                <span ng-show="reverseSort.topo.bolts.outstat[$index]">v</span>
                            </span>
                </a>
              </th>
            </tr>
            </thead>
            <tbody>
            <tr
              ng-repeat="stat in bolt.compDetails.outputStats|orderBy:orderByField.topo.bolts.outstat[$index]:reverseSort.topo.bolts.outstat[$index]"
              class="active">
              <td>{{stat.stream}}</td>
              <td>{{stat.emitted}}</td>
              <td>{{stat.transferred}}</td>
            </tr>
            </tbody>
          </table>

          <div class="sub-table-title"
               ng-show="bolt.compDetails.executorStats.length > 0"> - {{bolt.boltId}} Executors (10m)
          </div>
          <table class="table table-hover table-condensed" style="margin-bottom: 0"
                 ng-show="bolt.compDetails.executorStats.length > 0">
            <thead>
            <tr>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.bolts.exestat[$index] = !reverseSort.topo.bolts.exestat[$index];
                           orderByField.topo.bolts.exestat[$index]='id';">
                  Tasks
                            <span ng-show="orderByField.topo.bolts.exestat[$index] == 'id'">
                                <span ng-show="!reverseSort.topo.bolts.exestat[$index]">^</span>
                                <span ng-show="reverseSort.topo.bolts.exestat[$index]">v</span>
                            </span>
                </a>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.bolts.exestat[$index] = !reverseSort.topo.bolts.exestat[$index];
                           orderByField.topo.bolts.exestat[$index]='ip';">
                  IP
                            <span ng-show="orderByField.topo.bolts.exestat[$index] == 'ip'">
                                <span ng-show="!reverseSort.topo.bolts.exestat[$index]">^</span>
                                <span ng-show="reverseSort.topo.bolts.exestat[$index]">v</span>
                            </span>
                </a>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.bolts.exestat[$index] = !reverseSort.topo.bolts.exestat[$index];
                           orderByField.topo.bolts.exestat[$index]='host';">
                  Host
                            <span ng-show="orderByField.topo.bolts.exestat[$index] == 'host'">
                                <span ng-show="!reverseSort.topo.bolts.exestat[$index]">^</span>
                                <span ng-show="reverseSort.topo.bolts.exestat[$index]">v</span>
                            </span>
                </a>

              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.bolts.exestat[$index] = !reverseSort.topo.bolts.exestat[$index];
                           orderByField.topo.bolts.exestat[$index]='port';">
                  Port
                            <span ng-show="orderByField.topo.bolts.exestat[$index] == 'port'">
                                <span ng-show="!reverseSort.topo.bolts.exestat[$index]">^</span>
                                <span ng-show="reverseSort.topo.bolts.exestat[$index]">v</span>
                            </span>
                </a>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.bolts.exestat[$index] = !reverseSort.topo.bolts.exestat[$index];
                           orderByField.topo.bolts.exestat[$index]='uptime';">
                  Uptime
                            <span ng-show="orderByField.topo.bolts.exestat[$index] == 'uptime'">
                                <span ng-show="!reverseSort.topo.bolts.exestat[$index]">^</span>
                                <span ng-show="reverseSort.topo.bolts.exestat[$index]">v</span>
                            </span>
                </a>

              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.bolts.exestat[$index] = !reverseSort.topo.bolts.exestat[$index];
                           orderByField.topo.bolts.exestat[$index]='emitted';">
                  Emitted
                            <span ng-show="orderByField.topo.bolts.exestat[$index] == 'emitted'">
                                <span ng-show="!reverseSort.topo.bolts.exestat[$index]">^</span>
                                <span ng-show="reverseSort.topo.bolts.exestat[$index]">v</span>
                            </span>
                </a>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.bolts.exestat[$index] = !reverseSort.topo.bolts.exestat[$index];
                           orderByField.topo.bolts.exestat[$index]='transferred';">
                  Transferred
                            <span ng-show="orderByField.topo.bolts.exestat[$index] == 'transferred'">
                                <span ng-show="!reverseSort.topo.bolts.exestat[$index]">^</span>
                                <span ng-show="reverseSort.topo.bolts.exestat[$index]">v</span>
                            </span>
                </a>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.bolts.exestat[$index] = !reverseSort.topo.bolts.exestat[$index];
                           orderByField.topo.bolts.exestat[$index]='capacity';">
                  Capacity
                            <span ng-show="orderByField.topo.bolts.exestat[$index] == 'capacity'">
                                <span ng-show="!reverseSort.topo.bolts.exestat[$index]">^</span>
                                <span ng-show="reverseSort.topo.bolts.exestat[$index]">v</span>
                            </span>
                </a>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.bolts.exestat[$index] = !reverseSort.topo.bolts.exestat[$index];
                           orderByField.topo.bolts.exestat[$index]='executeLatency';">
                  Execute Latency (ms)
                            <span ng-show="orderByField.topo.bolts.exestat[$index] == 'executeLatency'">
                                <span ng-show="!reverseSort.topo.bolts.exestat[$index]">^</span>
                                <span ng-show="reverseSort.topo.bolts.exestat[$index]">v</span>
                            </span>
                </a>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.bolts.exestat[$index] = !reverseSort.topo.bolts.exestat[$index];
                           orderByField.topo.bolts.exestat[$index]='executed';">
                  Executed
                            <span ng-show="orderByField.topo.bolts.exestat[$index] == 'executed'">
                                <span ng-show="!reverseSort.topo.bolts.exestat[$index]">^</span>
                                <span ng-show="reverseSort.topo.bolts.exestat[$index]">v</span>
                            </span>
                </a>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.bolts.exestat[$index] = !reverseSort.topo.bolts.exestat[$index];
                           orderByField.topo.bolts.exestat[$index]='processLatency';">
                  Process Latency (ms)
                            <span ng-show="orderByField.topo.bolts.exestat[$index] == 'processLatency'">
                                <span ng-show="!reverseSort.topo.bolts.exestat[$index]">^</span>
                                <span ng-show="reverseSort.topo.bolts.exestat[$index]">v</span>
                            </span>
                </a>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.bolts.exestat[$index] = !reverseSort.topo.bolts.exestat[$index];
                           orderByField.topo.bolts.exestat[$index]='acked';">
                  Acked
                            <span ng-show="orderByField.topo.bolts.exestat[$index] == 'acked'">
                                <span ng-show="!reverseSort.topo.bolts.exestat[$index]">^</span>
                                <span ng-show="reverseSort.topo.bolts.exestat[$index]">v</span>
                            </span>
                </a>
              </th>
              <th>
                <a href=""
                   ng-click="reverseSort.topo.bolts.exestat[$index] = !reverseSort.topo.bolts.exestat[$index];
                           orderByField.topo.bolts.exestat[$index]='failed';">
                  Failed
                            <span ng-show="orderByField.topo.bolts.exestat[$index] == 'failed'">
                                <span ng-show="!reverseSort.topo.bolts.exestat[$index]">^</span>
                                <span ng-show="reverseSort.topo.bolts.exestat[$index]">v</span>
                            </span>
                </a>

              </th>
            </tr>
            </thead>
            <tbody>
            <tr
              ng-repeat="exestat in bolt.compDetails.executorStats|orderBy:orderByField.topo.bolts.exestat[$index]:reverseSort.topo.bolts.exestat[$index]"
              class="active">
              <td>{{exestat.id}}</td>
              <td>{{exestat.ip}}</td>
              <td>{{exestat.host}}</td>
              <td>{{exestat.port}}</td>
              <td>{{exestat.uptime}}</td>
              <td>{{exestat.emitted}}</td>
              <td>{{exestat.transferred}}</td>
              <td>{{exestat.capacity}}</td>
              <td>{{exestat.executeLatency}}</td>
              <td>{{exestat.executed}}</td>
              <td>{{exestat.processLatency}}</td>
              <td>{{exestat.acked}}</td>
              <td>{{exestat.failed}}</td>
            </tr>
            </tbody>
          </table>

          <div class="sub-table-title" ng-show="bolt.compDetails.componentErrors.length > 0">
            {{bolt.boltId}} Errors (10m)
          </div>
          <table ng-show="bolt.compDetails.componentErrors.length > 0"
                 class="table table-hover table-condensed" style="margin-bottom: 0">
            <thead>
            <tr>
              <th>Time</th>
              <th>Error</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="(key, value) in bolt.boltId.componentErrors" class="active">
              <td>{{key}}</td>
              <td>{{value}}</td>
            </tr>
            </tbody>
          </table>
        </div>
      </td>
    </tr>
    </tbody>
  </table>

  <h3>Different configs from default</h3>

  <table class="table table-hover table-condensed">
    <thead>
    <tr>
      <!--<th>类型</th>-->
      <th>Key</th>
      <th>Value</th>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat="(key, value) in topo.diffConfig" class="active">
      <td>{{key}}</td>
      <td>{{value}}</td>
    </tr>
    </tbody>
  </table>

  <h3>Same configs with default</h3>

  <table class="table table-hover table-condensed">
    <thead>
    <tr>
      <th>Key</th>
      <th>Value</th>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat="(key, value) in topo.sameConfig" class="active">
      <td>{{key}}</td>
      <td>{{value}}</td>
    </tr>
    </tbody>
  </table>
</div>
